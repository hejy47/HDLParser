6658dc3f9c783e645c82f4e0175d04574bd20934
[reggen] fix minor issue with chip_reg_block generation
diff --git a/util/reggen/uvm_reg.tpl.sv b/util/reggen/uvm_reg.tpl.sv
index 40f5f229e..dbcb64ef5 100644
--- a/util/reggen/uvm_reg.tpl.sv
+++ b/util/reggen/uvm_reg.tpl.sv
@@ -5,13 +5,15 @@
 // UVM Registers auto-generated by `reggen` containing data structure
 // Do Not Edit directly
 <% from reggen import (gen_dv)
-regs_flat = block.get_regs_flat()
 %>\
 ##// [PY-COMMENT]: function to generate typedefs recursively for blocks
 <%def name="typedefs(block)">\
 % for b in block.blocks:
 ${typedefs(b)}
 % endfor
+<%
+regs_flat = block.get_regs_flat()
+%>\
 % for r in regs_flat:
 typedef class ${gen_dv.rcname(block, r)};
 % endfor
@@ -24,8 +26,10 @@ typedef class ${gen_dv.bcname(block)};
 <%def name="construct_classes(block)">\
 % for b in block.blocks:
 ${construct_classes(b)}
-
 % endfor
+<%
+regs_flat = block.get_regs_flat()
+%>\
 // Block: ${block.name}
 % for r in regs_flat:
 <%